<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Qstore4s by diging</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name"><img src="imgs/Logo2.png" width="120px" style="vertical-align: middle;">QStore4s</h1>
      <h2 class="project-tagline"></h2>
      <a href="index.html" class="btn">Home</a>
      <a href="https://github.com/diging/qstore4s" class="btn">View on GitHub</a>
      <a href="https://github.com/diging/qstore4s/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/diging/qstore4s/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="welcome-to-qstore4s" class="anchor" href="#welcome-to-qstore4s" aria-hidden="true"><span class="octicon octicon-link"></span></a>QStore4S Rest API</h2>

        
<p>Please also refer to the examples and schemas <a href="https://github.com/diging/qstore4s/tree/master/QStore4S/qstore4s-xml">here</a>.</p>
<dl class="rest">
    <dt><span class="method method_post"></span> /add</dt>
    <dd>
        <p>This method lets you add new graphs to QStore4s.</p>
        <p>It expects XML describing the graph to be stored and will return the stored graph with IDs in either XML or JSON (depending on the <code>accept</code> attribute in the request header). In the XML describing a graph to be added you can either nest appellation and relation events or have them on the same level and then refer to them by id (using the attribute <code>internal_refId</code>). For example, the relation event [subj A - pred B - obj C] could be described as (pseudo code and only partial):</p>
<pre><code>&lt;relation_event&gt;
    &lt;relation&gt;
      &lt;subject&gt;
        &lt;appellation_event&gt;
            &lt;!-- info about subject appellation event here --&gt;
        &lt;/appellation_event&gt;
      &lt;/subject&gt;
      &lt;predicate&gt;
        &lt;appellation_event&gt;
            &lt;!-- info about predicate appellation event here --&gt;
        &lt;/appellation_event&gt;
      &lt;/predicate&gt;
      &lt;object&gt;
        &lt;appellation_event&gt;
            &lt;!-- info about object appellation event here --&gt;
        &lt;/appellation_event&gt;
      &lt;/object&gt;
    &lt;/relation&gt;
&lt;/relation_event&gt;</code></pre>
Or the information about any of the appellation events (or a relation event if referred to in a relation) can be moved up to the first level of the XML structure and then linked from within the relation part.
<pre><code>&lt;relation_event&gt;
    &lt;relation&gt;   
      &lt;subject&gt;
        &lt;appellation_event&gt;
          &lt;internal_refId&gt;APP_INT_ID_1&lt;/internal_refId&gt;
        &lt;/appellation_event&gt;
      &lt;/subject&gt;
      &lt;!-- predicate and object can be described here or referenced in the same manner --&gt;
    &lt;/relation&gt;
    
    &lt;!-- more elements --&gt;
    &lt;appellation_event&gt;
        &lt;refId&gt;APP_INT_ID_1&lt;/refId&gt;
        &lt;!-- info about object appellation event here --&gt;
    &lt;/appellation_event&gt;   
&lt;/relation_event&gt;</code></pre>
        
        Similarly, you can link to appellation and relation events that are already stored. Instead of the tag <code>internal_refId</code>, however, you would use <code>external_refId</code>.
<pre><code>&lt;relation_event&gt;
    &lt;relation&gt;   
      &lt;subject&gt;
        &lt;appellation_event&gt;
          &lt;external_refId&gt;APP_ID_123&lt;/external_refId&gt;
        &lt;/appellation_event&gt;
      &lt;/subject&gt;
      &lt;!-- predicate and object elements --&gt;
    &lt;/relation&gt;
&lt;/relation_event&gt;</code></pre>
        
        <ul>
            <li>Returns: XML or JSON</li>
            <li>Expects: XML input describing the graph to be stored</li>
            <li>Example: <a href="https://github.com/diging/qstore4s/blob/master/QStore4S/qstore4s-xml/input-example.xml">input-example.xml</a></li>
        </ul>
        
    
    </dd>
    
    <dt><span class="method method_get"></span> /get</dt>
    <dd>
        <p>Using this method you can retrieve information about a relation or appellation event. </p>
        <ul>
            <li>Returns: XML or JSON</li>
            <li>Expects request parameters:
                <ul>
                    <li><code>id</code>: ID of the relation or appellation event to be retrieved.</li>
                    <li><code>shallow</code>: This property applies when requesting relation events. It should be set to <code>true</code> if only the requested relation event with its direct first-level children should be returned. If it is set to anything else then true (or omitted from the request), QStore4S will return all subsequent nodes as well (e.g. if a relation event points to another relation event, this referenced relation event with all its children will be returned as well).</li>
                </ul>
            </li>
            <li>Example: http://exmple.com/qstore4s/get?id=ID-ABC-XA&shallow=true</li>
        </ul>
    </dd>
    
    <dt><span class="method method_post"></span> /get</dt>
    <dd>
        <p>Using this method you can retrieve information about multiple relation and appellation events.</p>
        <p>The method expects XML listing the IDs of all the requested appellation and relation events.</p>
        <ul>
            <li>Returns: XML or JSON</li>
            <li>Expects: XML listing the IDs of the requested relation and appellation events.            </li>
            <li>Example: <a href="https://github.com/diging/qstore4s/blob/master/QStore4S/qstore4s-xml/input-get-example.xml">input-get-example.xml</a>
                <pre>
<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;element_events xmlns="http://digitalhps.org/creationEvents-model"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://digitalhps.org/creationEvents-model QStore4S-GET-schema"&gt;
	&lt;id&gt;APP_EVN7047499249615914638&lt;/id&gt;
	&lt;id&gt;REL_EVN-2604468172392217040&lt;/id&gt;
	&lt;id&gt;APP_EVN-2778900838723337460&lt;/id&gt;
&lt;/element_events&gt;</code></pre>
            </li>
        </ul>
    </dd>
    
    <dt><span class="method method_post"></span> /searchByAppellationId </dt>
    <dd>
        <p>This method returns all relation events that reference the appellation event with the given ID. For example, if the request contains the appellation event ID 123, the method returns all relation events that reference the appellation event with ID 123.</p>
        <p>The method expects the XML of an appellation or relation event with the ID property filled.</p>
        
        <ul>
            <li>Returns: XML or JSON</li>
            <li>Expects: XML of an appellation or relation event with the ID filled in.           </li>
            <li>Example: 
                <pre>
<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;element_events xmlns="http://digitalhps.org/creationEvents-model"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://digitalhps.org/creationEvents-model qstore4s-schema.xsd"&gt;
  &lt;relation_event&gt;
    &lt;id&gt;REL_EVN-2604468172392217040&lt;/id&gt;
  &lt;/relation_event&gt;
&lt;/element_events&gt;</code></pre>
            </li>
        </ul>
    </dd>
    
    <dt><span class="method method_post"></span> /search </dt>
    <dd>
        <p>This method searches for events that match the given XML. The given XML could for example specify to search for all relations that have a subject appellation that points to the concept of the animal "dog".</p>
        <ul>
            <li>Returns: XML or JSON</li>
            <li>Expects: XML of a paritally filled graph. The method will find all graphs that match the given XML.           </li>
            <li>Example: <a href="https://github.com/diging/qstore4s/blob/master/QStore4S/qstore4s-xml/search-example_appellation_event.xml">search-example_appellation_event.xml</a>, <a href="https://github.com/diging/qstore4s/blob/master/QStore4S/qstore4s-xml/search-example-relation_event.xml">search-example-relation_event.xml</a>, <a href="https://github.com/diging/qstore4s/blob/master/QStore4S/qstore4s-xml/search-example-nested-relationEvent.xml">search-example-nested-relationEvent.xml</a>.
            </li>
        </ul>
    </dd>
    
</dl>


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/diging/qstore4s">Qstore4s</a> is maintained by <a href="https://github.com/diging">diging</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

